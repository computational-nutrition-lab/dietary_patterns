setwd("~/GitHub/dietary_patterns")
# Name your main directory for future use.
main.wd <- file.path(getwd())
# Import source code to run the analyses to follow.
source("lib/specify_dir_and_check_col.R")
source("lib/prep_data_for_clustering.R")
# ---------------------------------------------------------------------------------------------------------------
# Load example totals data
# Specify the directory where the data is.
SpecifyDataDirectory(directory.name = "eg_data/dietstudy/")
# ========================================================================================
# Load ASA24 data
# ========================================================================================
#
# Load necessary scripts
# Import source code to run the analyses to follow.
source("lib/specify_dir_and_check_col.R")
# ---------------------------------------------------------------------------------------------------------------
# Load your Items data
# Specify the directory where the data is.
SpecifyDataDirectory(directory.name = "eg_data/VVKAJ101-105/")
Items_raw <- read.csv("VVKAJ_2021-11-09_7963_Items_NoCommas.csv", sep = ",", header=T)
dim(Items_raw)
head(Items_raw, 2)
dim(Items_raw)
head(Items_raw, 2)
Items_raw[, 130]
# Calculate [total grams/eating occasion], grouped by individuals, day, eating occasion.
library(dplyr)
Items_by_User_Occ <-
Items_raw %>%
select(UserName, IntakeStartDateTime, Occ_No, 26:128) %>%  # Select necessary columns
group_by(UserName, IntakeStartDateTime, Occ_No) %>%
summarise_each(funs(sum))
head(Items_by_User_Occ)
# Add a unique ID for each line for merging.
Items_by_User_Occ$uniqueid <- paste0(Items_by_User_Occ$UserName, "_",
Items_by_User_Occ$IntakeStartDateTime, "_",
Items_by_User_Occ$Occ_No)
Items_by_User_Occ
# Get the type of occasion (breakfast, just a drink etc.) by user by occasion.
Occ_Names <-
Items_raw %>%
select(UserName, IntakeStartDateTime, Occ_No, Occ_Name) %>%
group_by(UserName, IntakeStartDateTime, Occ_No) %>%
summarise_each(funs(mean))
Occ_Names
# Add a unique ID for each line for merging.
Occ_Names$uniqueid <- paste0(Occ_Names$UserName, "_",
Occ_Names$IntakeStartDateTime, "_",
Occ_Names$Occ_No)
Occ_Names
# Take only uniqueid and Occ_Name.
Occ_Names_2 <- Occ_Names[, c("uniqueid", "Occ_Name")]
Occ_Names_2
# Make a reference table that has Occ_Name and corresponding types.
Occ_Names_ref <- data.frame(Occ_Name=seq(1:8),
Occ_In_Words=c("Breakfast", "Brunch",
"Lunch",     "Dinner",
"Supper",    "Snack",
"Just a drink", "Just a supplement" ))
Occ_Names_ref
# Match the Occ_Nmes with the Occ_Names_ref (VLOOKUP)
Occ_Names_and_Words <- merge(x=Occ_Names_2, y=Occ_Names_ref, by="Occ_Name", all.x=T)
Occ_Names_and_Words
Totals_to_check <- merge(x=Items_by_User_Occ, y=Occ_Names_and_Words, by="uniqueid", all.x=T)
Totals_to_check <- merge(x=Items_by_User_Occ, y=Occ_Names_and_Words, by="uniqueid", all.x=T)
Totals_to_check
